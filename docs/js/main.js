!function(e){var t={};function a(n){if(t[n])return t[n].exports;var c=t[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,a),c.l=!0,c.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t){(()=>{let e=[];localStorage.getItem("columns")&&(e=JSON.parse(localStorage.getItem("columns")),l()),Array.prototype.removeEl=function(e){return delete this[e],this.filter(e=>e)};(()=>{const t=document.querySelector(".wrapper__block-btn"),n=document.querySelector(".wrapper__block-column-name");t.addEventListener("click",()=>{const t=n.value;if(t.length>2){const a={title:t,tasks:[]};e.push(a),d("columns",JSON.stringify(e)),u()}}),a()})();const t=()=>{document.querySelectorAll(".wrapper__block-header-remove").forEach((t,a)=>{t.addEventListener("click",()=>{e=e.removeEl(a),d("columns",JSON.stringify(e)),u()})})};function a(){const t=document.querySelectorAll(".wrapper__block"),a=document.querySelectorAll('.wrapper__block-form-task-btn[data-form-btn="add"]'),n=document.querySelectorAll('.wrapper__block-form-task-btn[data-form-btn="cancel"]'),c=document.querySelectorAll(".wrapper__block-form-task-name"),s=document.querySelectorAll(".wrapper__block-form"),o=document.querySelectorAll(".wrapper__block-footer-total-tasks");t.forEach((t,l)=>{a[l].addEventListener("click",()=>{const t=c[l].value,a=new Date;if(t.length>2){const n={title:t,date:`${a.getHours()<10?"0"+a.getHours():a.getHours()}:${a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes()}`,check:!1,id:Math.ceil(Date.now())+1.5*l,column_num:l};e[l].tasks.push(n),o[l].innerText=i(l),s[l].classList.add("hide"),d("columns",JSON.stringify(e)),u()}}),n[l].addEventListener("click",()=>s[l].classList.add("hide"))})}function n(){e.map((t,a)=>{const n=document.querySelectorAll(`.wrapper__block-main-tasks-item-checkbox[data-column="${a}"]`),c=document.querySelectorAll(`.wrapper__block-main-tasks-item[data-column="${a}"]`),s=document.querySelectorAll(`.wrapper__block-main-tasks-item-name[data-column="${a}"]`);c.forEach((c,o)=>{c.addEventListener("click",()=>{if(n[o].checked){const e=n[o].id.match(/\d+/g);t.tasks.map((t,n)=>{a===+e[0]&&n===+e[1]&&(t.check=!0,s[n].classList.add("done-task"))})}else{const e=n[o].id.match(/\d+/g);t.tasks.map((t,n)=>{a===+e[0]&&n===+e[1]&&(t.check=!1,s[n].classList.remove("done-task"))})}d("columns",JSON.stringify(e))})})})}function c(){const t=document.querySelectorAll(".wrapper__block-header-settings-column"),a=document.querySelectorAll(".wrapper__block"),n=document.querySelectorAll(".wrapper__block-header-title"),c=document.querySelectorAll(".wrapper__block-header-title-change-column"),s=document.querySelectorAll(".wrapper__block-header-change-column-text-btn");a.forEach((e,a)=>{e.addEventListener("mouseenter",()=>t[a].classList.remove("hide")),e.addEventListener("mouseleave",()=>t[a].classList.add("hide"))}),s.forEach((t,a)=>{let s=!1;t.addEventListener("click",()=>{s=!s,n[a].classList.toggle("hide"),c[a].classList.toggle("hide"),[...t.childNodes].find(e=>"IMG"===e.nodeName).src=s?"./images/check.svg":"./images/pencil.svg",[...t.childNodes].find(e=>"IMG"===e.nodeName).alt=s?"check":"pencil",t.classList.toggle("blue-btn"),s||(c[a].value?(e[a].title=c[a].value,d("columns",JSON.stringify(e)),u()):(n[a].classList.remove("hide"),c[a].classList.add("hide")))})})}function s(){const t=document.querySelectorAll(".wrapper__block-main-tasks-item"),a=document.querySelectorAll(".wrapper__block-main-tasks-item-date-remove-task-btn"),n=document.querySelectorAll(".wrapper__block-main-tasks-item-date-change-task-btn"),c=document.querySelectorAll(".wrapper__block-main-tasks-item-date-text");t.forEach((e,t)=>{e.addEventListener("mouseenter",()=>{a[t].classList.remove("hide"),n[t].classList.remove("hide"),c[t].classList.add("hide")}),e.addEventListener("mouseleave",()=>{a[t].classList.add("hide"),n[t].classList.add("hide"),c[t].classList.remove("hide")})}),e.map((t,a)=>{document.querySelectorAll(`.wrapper__block-main-tasks-item-date-remove-task-btn[data-column="${a}"]`).forEach((t,a)=>{t.addEventListener("click",()=>{const n=+t.dataset.column;e[n].tasks=e[n].tasks.removeEl(a),d("columns",JSON.stringify(e)),u()})})})}function o(){e.map((t,a)=>{const c=document.querySelectorAll(`.wrapper__block-main-tasks-item-date-change-task-btn[data-column="${a}"]`),s=document.querySelectorAll(`.wrapper__block-main-tasks-item-change-task-name[data-column="${a}"]`),o=document.querySelectorAll(`.wrapper__block-main-tasks-item-name[data-column="${a}"]`);let l=!1;c.forEach((t,a)=>{t.addEventListener("click",()=>{const c=+t.dataset.column;l=!l,[...t.childNodes].find(e=>"IMG"===e.nodeName).src=l?"./images/check.svg":"./images/pencil.svg",[...t.childNodes].find(e=>"IMG"===e.nodeName).alt=l?"check":"pencil",s[a].classList.toggle("hide"),o[a].classList.toggle("hide"),t.classList.toggle("blue-btn"),e[c].tasks[a].title=s[a].value,n(),l||(d("columns",JSON.stringify(e)),u())})})})}function l(){const t=document.querySelector(".wrapper__blocks");t.innerHTML="",e.map((e,a)=>{const n=`\n      <div class="wrapper__block">\n        <header class="wrapper__block-header">\n          <div class="wrapper__block-header-item">\n            <h3 class="wrapper__block-header-title">${e.title}</h3>\n            <input class="wrapper__block-header-title-change-column change-text-input hide" type="text" value="${e.title}" />\n          </div>\n          <div class="wrapper__block-header-item wrapper__block-header-settings-column hide">\n            <button class="wrapper__block-header-remove"></button>\n            <button class="wrapper__block-header-change-column-text-btn">\n              <img src="./images/pencil.svg" alt="pencil" />\n            </button>\n          </div>\n        </header>\n        <main class="wrapper__block-main">\n          <ul class="wrapper__block-main-tasks" data-list-num="${a}"></ul>\n        </main>\n        <footer class="wrapper__block-footer">\n          <div class="wrapper__block-footer-total-tasks">\n            ${i(a)}\n          </div>\n          <div class="wrapper__block-footer-add-new-task">\n            <button class="wrapper__block-footer-add-new-task-btn">Добавить новую задачу</button>\n          </div>\n        </footer>\n        <div class="wrapper__block-form hide">\n          <input class="wrapper__block-form-task-name form-text" type="text" placeholder="Название задачи">\n          <button class="wrapper__block-form-task-btn form-btn" data-form-btn="add">Добавить задачу</button>\n          <button class="wrapper__block-form-task-btn form-btn form-btn-cancel" data-form-btn="cancel">Отмена</button>\n        </div>\n      </div>\n      `;t.innerHTML+=n}),function(){const t=document.querySelectorAll(".wrapper__block-main-tasks");t.forEach(e=>e.innerHTML=""),e.map((e,a)=>{e.tasks.map((e,n)=>{const c=`\n        <li class="wrapper__block-main-tasks-item" data-column="${a}" data-num-task="${n}">\n          <label for="checkbox-${a}-${n}">\n            <div class="wrapper__block-main-tasks-item-block">\n              <input class="wrapper__block-main-tasks-item-checkbox" type="checkbox" id="checkbox-${a}-${n}" ${e.check?"checked":""} data-column="${a}" />\n              <span class="wrapper__block-main-tasks-item-check"></span>\n            </div>\n            <div class="wrapper__block-main-tasks-item-block">\n              <div class="wrapper__block-main-tasks-item-name ${e.check?"done-task":""}" data-column="${a}">${e.title}</div>\n              <input class="wrapper__block-main-tasks-item-change-task-name change-text-input hide" type="text" value="${e.title}" data-column="${a}" />\n            </div>\n            <div class="wrapper__block-main-tasks-item-block wrapper__block-main-tasks-item-date">\n              <button class="wrapper__block-main-tasks-item-date-remove-task-btn hide" data-column="${a}"></button>\n              <button class="wrapper__block-main-tasks-item-date-change-task-btn hide" data-column="${a}">\n                <img src="./images/pencil.svg" alt="pencil" />\n              </button>\n              <span class="wrapper__block-main-tasks-item-date-text">${e.date}</span>\n            </div>\n          </label>\n        </li>\n        `;t[a].innerHTML+=c})})}()}function r(){const t=document.querySelectorAll(".wrapper__block-main-tasks-item"),a=document.querySelectorAll(".wrapper__block-main-tasks");t.forEach(e=>{e.draggable=!0,e.addEventListener("dragstart",()=>setTimeout(()=>e.classList.add("selected-task"),0)),e.addEventListener("dragend",()=>e.classList.remove("selected-task"))}),a.forEach(t=>{t.addEventListener("dragover",e=>{e.preventDefault()},!1),t.addEventListener("drop",()=>{const a=document.querySelector(".selected-task");!function(t,a){if(a){const n=e[+a.dataset.column].tasks[+a.dataset.numTask];e.map((c,s)=>{if(!c.tasks.find(e=>e.id===n.id))return;const o=c.tasks.find(e=>e.id===n.id);s===o.column_num&&c.tasks.map((n,s)=>{if(n.id===o.id){const n=[...a.childNodes].find(e=>"LABEL"===e.nodeName),l=document.querySelector(`.wrapper__block-main-tasks-item-checkbox[data-column="${o.column_num}"]`),r=document.querySelector(`.wrapper__block-main-tasks-item-date-remove-task-btn[data-column="${o.column_num}"]`),i=document.querySelector(`.wrapper__block-main-tasks-item-date-change-task-btn[data-column="${o.column_num}"]`);n.for=`checkbox-${t}-${s}`,l.id=`checkbox-${t}-${s}`,l.dataset.column=t,r.dataset.column=t,i.dataset.column=t,o.column_num=t,a.dataset.column=t,a.dataset.numTask=s,c.tasks=c.tasks.removeEl(s),e[t].tasks.push(o)}})}),d("columns",JSON.stringify(e))}}(+t.dataset.listNum,a),t.append(a),u()})})}function i(t){let a="";return(0===e[t].tasks.length||e[t].tasks.length>4)&&(a=e[t].tasks.length+" задач"),1===e[t].tasks.length&&(a=e[t].tasks.length+" задача"),e[t].tasks.length>1&&e[t].tasks.length<5&&(a=e[t].tasks.length+" задачи"),a}function d(e,t){localStorage.setItem(e,t)}function m(){const e=document.querySelectorAll(".wrapper__block-form");document.querySelectorAll(".wrapper__block-footer-add-new-task-btn").forEach((t,a)=>t.addEventListener("click",()=>e[a].classList.remove("hide")))}function u(){l(),a(),m(),t(),o(),c(),s(),r(),n()}t(),n(),c(),s(),o(),r(),m()})()}]);