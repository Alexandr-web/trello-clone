!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t,a){"use strict";a.r(t),t.default={light:{background:"#fff",border:"#E3E7FF"},dark:{background:"#1F1F1F",border:"#000"},dark_green:{background:"#3A5D5F",border:"#263D3E"},dark_blue:{background:"#4E3C7A",border:"#3D247A"},light_green:{background:"#BBE8D1",border:"#64E8A4"},pale_yellow:{background:"#F7BD7F",border:"#F79E3F"}}},function(e,t,a){a(0),e.exports=a(2)},function(e,t,a){"use strict";a.r(t);var o=a(0);(()=>{let e=[];localStorage.getItem("columns")&&(e=JSON.parse(localStorage.getItem("columns")),d()),Array.prototype.removeEl=function(e){return delete this[e],this.filter(e=>e)};(()=>{const t=document.querySelector(".wrapper__block-btn"),n=document.querySelector(".wrapper__block-column-name");t.addEventListener("click",()=>{const t=n.value;if(t.length>2){const a={title:t,tasks:[],color_theme:o.default.light};e.push(a),m("columns",JSON.stringify(e)),p()}}),a()})();const t=()=>{document.querySelectorAll(".wrapper__block-header-remove").forEach((t,a)=>{t.addEventListener("click",()=>{document.documentElement.classList.remove("dark-background"),e=e.removeEl(a),m("columns",JSON.stringify(e)),p()})})};function a(){const t=document.querySelectorAll(".wrapper__block"),a=document.querySelectorAll('.wrapper__block-form-task-btn[data-form-btn="add"]'),o=document.querySelectorAll('.wrapper__block-form-task-btn[data-form-btn="cancel"]'),n=document.querySelectorAll(".wrapper__block-form-task-name"),c=document.querySelectorAll(".wrapper__block-form"),r=document.querySelectorAll(".wrapper__block-footer-total-tasks");t.forEach((t,l)=>{a[l].addEventListener("click",()=>{const t=n[l].value,a=new Date;if(t.length>2){const o={title:t,date:`${a.getHours()<10?"0"+a.getHours():a.getHours()}:${a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes()}`,check:!1,id:Math.ceil(Date.now())+1.5*l,column_num:l};e[l].tasks.push(o),r[l].innerText=u(l),c[l].classList.add("hide"),m("columns",JSON.stringify(e)),p()}}),o[l].addEventListener("click",()=>c[l].classList.add("hide"))})}function n(){e.map((t,a)=>{const o=document.querySelectorAll(`.wrapper__block-main-tasks-item-checkbox[data-column="${a}"]`),n=document.querySelectorAll(`.wrapper__block-main-tasks-item[data-column="${a}"]`),c=document.querySelectorAll(`.wrapper__block-main-tasks-item-name[data-column="${a}"]`);n.forEach((n,r)=>{n.addEventListener("click",()=>{if(o[r].checked){const e=o[r].id.match(/\d+/g);t.tasks.map((t,o)=>{a===+e[0]&&o===+e[1]&&(t.check=!0,c[o].classList.add("done-task"))})}else{const e=o[r].id.match(/\d+/g);t.tasks.map((t,o)=>{a===+e[0]&&o===+e[1]&&(t.check=!1,c[o].classList.remove("done-task"))})}m("columns",JSON.stringify(e))})})})}function c(){const t=document.querySelectorAll(".wrapper__block-header-settings-column"),a=document.querySelectorAll(".wrapper__block"),o=document.querySelectorAll(".wrapper__block-header-title"),n=document.querySelectorAll(".wrapper__block-header-title-change-column"),c=document.querySelectorAll(".wrapper__block-header-change-column-text-btn");a.forEach((e,a)=>{e.addEventListener("mouseenter",()=>t[a].classList.remove("hide")),e.addEventListener("mouseleave",()=>t[a].classList.add("hide"))}),c.forEach((t,a)=>{let c=!1;t.addEventListener("click",()=>{c=!c,o[a].classList.toggle("hide"),n[a].classList.toggle("hide"),[...t.childNodes].find(e=>"IMG"===e.nodeName).src=c?"./images/check.svg":"./images/pencil.svg",[...t.childNodes].find(e=>"IMG"===e.nodeName).alt=c?"check":"pencil",t.classList.toggle("blue-btn"),c||(n[a].value?(e[a].title=n[a].value,m("columns",JSON.stringify(e)),p()):(o[a].classList.remove("hide"),n[a].classList.add("hide"))),n[a].focus()})})}function r(){const t=document.querySelectorAll(".wrapper__block-main-tasks-item"),a=document.querySelectorAll(".wrapper__block-main-tasks-item-date-remove-task-btn"),o=document.querySelectorAll(".wrapper__block-main-tasks-item-date-change-task-btn"),n=document.querySelectorAll(".wrapper__block-main-tasks-item-date-text");t.forEach((e,t)=>{e.addEventListener("mouseenter",()=>{a[t].classList.remove("hide"),o[t].classList.remove("hide"),n[t].classList.add("hide")}),e.addEventListener("mouseleave",()=>{a[t].classList.add("hide"),o[t].classList.add("hide"),n[t].classList.remove("hide")})}),e.map((t,a)=>{document.querySelectorAll(`.wrapper__block-main-tasks-item-date-remove-task-btn[data-column="${a}"]`).forEach((t,a)=>{t.addEventListener("click",()=>{const o=+t.dataset.column;e[o].tasks=e[o].tasks.removeEl(a),m("columns",JSON.stringify(e)),p()})})})}function l(){e.map((t,a)=>{const o=document.querySelectorAll(`.wrapper__block-main-tasks-item-date-change-task-btn[data-column="${a}"]`),c=document.querySelectorAll(`.wrapper__block-main-tasks-item-change-task-name[data-column="${a}"]`),r=document.querySelectorAll(`.wrapper__block-main-tasks-item-name[data-column="${a}"]`);let l=!1;o.forEach((t,a)=>{t.addEventListener("click",()=>{const o=+t.dataset.column;l=!l,[...t.childNodes].find(e=>"IMG"===e.nodeName).src=l?"./images/check.svg":"./images/pencil.svg",[...t.childNodes].find(e=>"IMG"===e.nodeName).alt=l?"check":"pencil",c[a].classList.toggle("hide"),r[a].classList.toggle("hide"),t.classList.toggle("blue-btn"),e[o].tasks[a].title=c[a].value,n(),l||(m("columns",JSON.stringify(e)),p()),c[a].focus()})})})}function s(){e.map((t,a)=>{const n=document.querySelectorAll(".wrapper__block-header-change-color-theme-column-btn"),c=document.querySelectorAll(".wrapper__block"),r=document.querySelectorAll(".wrapper__block-color-theme"),l=document.querySelectorAll(".wrapper__block-color-theme-btn"),s=document.querySelectorAll(`.wrapper__block-color-theme-list[data-column="${a}"] li`);n.forEach((t,a)=>{t.addEventListener("click",()=>{document.documentElement.classList.add("dark-background"),r[a].style.zIndex="1",c.forEach(e=>e.style.zIndex="-1"),c[a].style.zIndex="99999",s.forEach((t,n)=>{const c=t.dataset.colorTheme;t.addEventListener("click",()=>{s.forEach(e=>e.classList.remove("active-color")),(e=>{s[e].classList.add("active-color")})(n);for(let t in o.default)c===t&&(e[a].color_theme=o.default[t])});for(let n in o.default)c===n&&o.default[n].background===e[a].color_theme.background&&t.classList.add("active-color")}),l[a].addEventListener("click",()=>{document.documentElement.classList.remove("dark-background"),r[a].style.zIndex="-1",c.forEach(e=>e.style.zIndex="0"),m("columns",JSON.stringify(e)),p()})})})})}function d(){const t=document.querySelector(".wrapper__blocks");t.innerHTML="",e.map((e,a)=>{const o=`\n      <div class="wrapper__block">\n        <header class="wrapper__block-header" style="background: ${e.color_theme.background}; border-bottom: 1.5px solid ${e.color_theme.border};">\n          <div class="wrapper__block-header-item">\n            <h3 class="wrapper__block-header-title">${e.title}</h3>\n            <input class="wrapper__block-header-title-change-column change-text-input hide" type="text" value="${e.title}" />\n          </div>\n          <div class="wrapper__block-header-item wrapper__block-header-settings-column hide">\n            <button class="wrapper__block-header-remove"></button>\n            <button class="wrapper__block-header-change-color-theme-column-btn">\n              <img src="./images/palette.svg" alt="palette"></img>\n            </button>\n            <button class="wrapper__block-header-change-column-text-btn">\n              <img src="./images/pencil.svg" alt="pencil" />\n            </button>\n          </div>\n        </header>\n        <main class="wrapper__block-main" style="background: ${e.color_theme.background}; border-bottom: 1.5px solid ${e.color_theme.border};">\n          <ul class="wrapper__block-main-tasks" data-list-num="${a}"></ul>\n        </main>\n        <footer class="wrapper__block-footer" style="background: ${e.color_theme.background}; border-top: 1.5px solid ${e.color_theme.border};">\n          <div class="wrapper__block-footer-total-tasks">\n            ${u(a)}\n          </div>\n          <div class="wrapper__block-footer-add-new-task">\n            <button class="wrapper__block-footer-add-new-task-btn">Добавить новую задачу</button>\n          </div>\n        </footer>\n        <div class="wrapper__block-form hide" style="background: ${e.color_theme.background}">\n          <input class="wrapper__block-form-task-name form-text" type="text" placeholder="Название задачи">\n          <button class="wrapper__block-form-task-btn form-btn" data-form-btn="add">Добавить задачу</button>\n          <button class="wrapper__block-form-task-btn form-btn form-btn-cancel" data-form-btn="cancel">Отмена</button>\n        </div>\n        <div class="wrapper__block-color-theme" style="background: ${e.color_theme.background};">\n          <h2 class="wrapper__block-color-theme-heading">Выберите задний фон столбца: "${e.title}"</h2>\n          <ul class="wrapper__block-color-theme-list" data-column="${a}"></ul>\n          <button class="wrapper__block-color-theme-btn blue-btn">\n            <img src="./images/check.svg" alt="check" />\n          </button>\n        </div>\n      </div>\n      `;t.innerHTML+=o});document.querySelectorAll(".wrapper__block-color-theme-list").forEach(e=>{for(let t in o.default){const a=`<li class="wrapper__block-color-theme-list-item" data-color-theme="${t}" style="background: ${o.default[t].background}; border: 1px solid ${o.default[t].border}"></li>`;e.innerHTML+=a}}),function(){const t=document.querySelectorAll(".wrapper__block-main-tasks");t.forEach(e=>e.innerHTML=""),e.map((e,a)=>{e.tasks.map((o,n)=>{const c=`\n        <li class="wrapper__block-main-tasks-item" data-column="${a}" data-num-task="${n}">\n          <label for="checkbox-${a}-${n}">\n            <div class="wrapper__block-main-tasks-item-block">\n              <input class="wrapper__block-main-tasks-item-checkbox" type="checkbox" id="checkbox-${a}-${n}" ${o.check?"checked":""} data-column="${a}" />\n              <span class="wrapper__block-main-tasks-item-check" style="border: 1px solid ${e.color_theme.border}"></span>\n            </div>\n            <div class="wrapper__block-main-tasks-item-block">\n              <div class="wrapper__block-main-tasks-item-name ${o.check?"done-task":""}" data-column="${a}">${o.title}</div>\n              <input class="wrapper__block-main-tasks-item-change-task-name change-text-input hide" type="text" value="${o.title}" data-column="${a}" />\n            </div>\n            <div class="wrapper__block-main-tasks-item-block wrapper__block-main-tasks-item-date">\n              <button class="wrapper__block-main-tasks-item-date-remove-task-btn hide" data-column="${a}"></button>\n              <button class="wrapper__block-main-tasks-item-date-change-task-btn hide" data-column="${a}">\n                <img src="./images/pencil.svg" alt="pencil" />\n              </button>\n              <span class="wrapper__block-main-tasks-item-date-text">${o.date}</span>\n            </div>\n          </label>\n        </li>\n        `;t[a].innerHTML+=c})})}()}function i(){const t=document.querySelectorAll(".wrapper__block-main-tasks-item"),a=document.querySelectorAll(".wrapper__block-main-tasks");t.forEach(e=>{e.draggable=!0,e.addEventListener("dragstart",()=>setTimeout(()=>e.classList.add("selected-task"),0)),e.addEventListener("dragend",()=>e.classList.remove("selected-task"))}),a.forEach(t=>{t.addEventListener("dragover",e=>{e.preventDefault()},!1),t.addEventListener("drop",()=>{const a=document.querySelector(".selected-task");!function(t,a){if(a){const o=e[+a.dataset.column].tasks[+a.dataset.numTask];e.map((n,c)=>{if(!n.tasks.find(e=>e.id===o.id))return;const r=n.tasks.find(e=>e.id===o.id);c===r.column_num&&n.tasks.map((o,c)=>{if(o.id===r.id){const o=[...a.childNodes].find(e=>"LABEL"===e.nodeName),l=document.querySelector(`.wrapper__block-main-tasks-item-checkbox[data-column="${r.column_num}"]`),s=document.querySelector(`.wrapper__block-main-tasks-item-date-remove-task-btn[data-column="${r.column_num}"]`),d=document.querySelector(`.wrapper__block-main-tasks-item-date-change-task-btn[data-column="${r.column_num}"]`);o.for=`checkbox-${t}-${c}`,l.id=`checkbox-${t}-${c}`,l.dataset.column=t,s.dataset.column=t,d.dataset.column=t,r.column_num=t,a.dataset.column=t,a.dataset.numTask=c,n.tasks=n.tasks.removeEl(c),e[t].tasks.push(r)}})}),m("columns",JSON.stringify(e))}}(+t.dataset.listNum,a),t.append(a),p()})})}function u(t){let a="";return(0===e[t].tasks.length||e[t].tasks.length>4)&&(a=e[t].tasks.length+" задач"),1===e[t].tasks.length&&(a=e[t].tasks.length+" задача"),e[t].tasks.length>1&&e[t].tasks.length<5&&(a=e[t].tasks.length+" задачи"),a}function m(e,t){localStorage.setItem(e,t)}function k(){const e=document.querySelectorAll(".wrapper__block-form");document.querySelectorAll(".wrapper__block-footer-add-new-task-btn").forEach((t,a)=>t.addEventListener("click",()=>e[a].classList.remove("hide")))}function p(){d(),a(),k(),t(),s(),l(),c(),r(),i(),n()}t(),n(),c(),r(),l(),s(),i(),k()})()}]);