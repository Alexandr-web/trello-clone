!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){(()=>{let e=[];localStorage.getItem("columns")&&(e=JSON.parse(localStorage.getItem("columns")),o()),Array.prototype.removeEl=function(e){return delete this[e],this.filter(e=>e)};(()=>{const t=document.querySelector(".wrapper__block-btn"),a=document.querySelector(".wrapper__block-column-name");t.addEventListener("click",()=>{const t=a.value;if(t.length>2){const n={title:t,tasks:[]};e.push(n),u(),i("columns",JSON.stringify(e))}}),n()})();const t=()=>{document.querySelectorAll(".wrapper__block-header-remove").forEach((t,n)=>{t.addEventListener("click",()=>{e=e.removeEl(n),u(),i("columns",JSON.stringify(e))})})};function n(){const t=document.querySelectorAll(".wrapper__block"),n=document.querySelectorAll('.wrapper__block-form-task-btn[data-form-btn="add"]'),o=document.querySelectorAll('.wrapper__block-form-task-btn[data-form-btn="cancel"]'),d=document.querySelectorAll(".wrapper__block-form-task-name"),u=document.querySelectorAll(".wrapper__block-form"),m=document.querySelectorAll(".wrapper__block-footer-total-tasks");t.forEach((t,p)=>{n[p].addEventListener("click",()=>{const t=d[p].value,n=new Date;if(t.length>2){const o={title:t,date:`${n.getHours()<10?"0"+n.getHours():n.getHours()}:${n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes()}`,check:!1,id:Math.ceil(Date.now())+1.5*p,column_num:p};e[p].tasks.push(o),m[p].innerText=l(p),u[p].classList.add("hide"),s(),i("columns",JSON.stringify(e)),a(),c(),r()}}),o[p].addEventListener("click",()=>u[p].classList.add("hide"))})}function a(){const t=document.querySelectorAll(".wrapper__block-main-tasks-item label input");document.querySelectorAll(".wrapper__block-main-tasks-item").forEach((n,a)=>{n.addEventListener("click",()=>{e.map((e,r)=>{if(t[a].checked){const o=t[a].id.match(/\d+/g);e.tasks.map((e,t)=>{r===+o[0]&&t===+o[1]&&(e.check=!0)}),n.classList.add("done-task")}else{const o=t[a].id.match(/\d+/g);e.tasks.map((e,t)=>{r===+o[0]&&t===+o[1]&&(e.check=!1)}),n.classList.remove("done-task")}}),i("columns",JSON.stringify(e))})})}function r(){const t=document.querySelectorAll(".wrapper__block-main-tasks-item"),n=document.querySelectorAll(".wrapper__block-main-tasks-item-date-remove-task-btn"),a=document.querySelectorAll(".wrapper__block-main-tasks-item-date-text");t.forEach((e,t)=>{e.addEventListener("mouseenter",()=>{n[t].classList.remove("hide"),a[t].classList.add("hide")}),e.addEventListener("mouseleave",()=>{n[t].classList.add("hide"),a[t].classList.remove("hide")})}),e.map((t,n)=>{document.querySelectorAll(`.wrapper__block-main-tasks-item-date-remove-task-btn[data-column="${n}"]`).forEach((t,n)=>{t.addEventListener("click",()=>{const a=+t.dataset.column;e[a].tasks=e[a].tasks.removeEl(n),i("columns",JSON.stringify(e)),u()})})})}function o(){const t=document.querySelector(".wrapper__blocks");t.innerHTML="",e.map((e,n)=>{const a=`\n      <div class="wrapper__block">\n        <header class="wrapper__block-header">\n          <h3 class="wrapper__block-header-title">${e.title}</h3>\n          <button class="wrapper__block-header-remove"></button>\n        </header>\n        <main class="wrapper__block-main">\n          <ul class="wrapper__block-main-tasks" data-list-num="${n}"></ul>\n        </main>\n        <footer class="wrapper__block-footer">\n          <div class="wrapper__block-footer-total-tasks">\n            ${l(n)}\n          </div>\n          <div class="wrapper__block-footer-add-new-task">\n            <button class="wrapper__block-footer-add-new-task-btn">Добавить новую задачу</button>\n          </div>\n        </footer>\n        <div class="wrapper__block-form hide">\n          <input class="wrapper__block-form-task-name form-text" type="text" placeholder="Название задачи">\n          <button class="wrapper__block-form-task-btn form-btn" data-form-btn="add">Добавить задачу</button>\n          <button class="wrapper__block-form-task-btn form-btn form-btn-cancel" data-form-btn="cancel">Отмена</button>\n        </div>\n      </div>\n      `;t.innerHTML+=a}),s(),c(),r()}function s(){const t=document.querySelectorAll(".wrapper__block-main-tasks");t.forEach(e=>e.innerHTML=""),e.map((e,n)=>{e.tasks.map((e,a)=>{const r=`\n        <li class="wrapper__block-main-tasks-item ${e.check?"done-task":""}" data-column="${n}" data-num-task="${a}">\n          <label for="checkbox-${n}-${a}">\n            <input type="checkbox" id="checkbox-${n}-${a}" ${e.check?"checked":""} />\n            <span class="wrapper__block-main-tasks-item-check"></span>\n            <div class="wrapper__block-main-tasks-item-name">${e.title}</div>\n            <div class="wrapper__block-main-tasks-item-date">\n              <button class="wrapper__block-main-tasks-item-date-remove-task-btn hide" data-column="${n}"></button>\n              <span class="wrapper__block-main-tasks-item-date-text">${e.date}</span>\n            </div>\n          </label>\n        </li>\n        `;t[n].innerHTML+=r})})}function c(){const t=document.querySelectorAll(".wrapper__block-main-tasks-item"),n=document.querySelectorAll(".wrapper__block-main-tasks");t.forEach(e=>{e.draggable=!0,e.addEventListener("dragstart",()=>setTimeout(()=>e.classList.add("selected-task"),0)),e.addEventListener("dragend",()=>e.classList.remove("selected-task"))}),n.forEach(t=>{t.addEventListener("dragover",e=>{e.preventDefault()},!1),t.addEventListener("drop",()=>{const n=document.querySelector(".selected-task");!function(t,n){if(n){const a=e[+n.dataset.column].tasks[+n.dataset.numTask];e.map((r,o)=>{if(!r.tasks.find(e=>e.id===a.id))return;const s=r.tasks.find(e=>e.id===a.id);o===s.column_num&&r.tasks.map((a,o)=>{if(a.id===s.id){const a=[...n.childNodes].find(e=>"LABEL"===e.nodeName),c=[...a.childNodes].find(e=>"INPUT"===e.nodeName),l=document.querySelector(`.wrapper__block-main-tasks-item-date-remove-task-btn[data-column="${s.column_num}"]`);a.setAttribute("for",`checkbox-${t}-${o}`),c.setAttribute("id",`checkbox-${t}-${o}`),l.dataset.column=t,s.column_num=t,n.dataset.column=t,n.dataset.numTask=o,r.tasks=r.tasks.removeEl(o),e[t].tasks.push(s)}})}),i("columns",JSON.stringify(e))}}(+t.dataset.listNum,n),t.append(n),o(),a(),u()})})}function l(t){let n="";return(0===e[t].tasks.length||e[t].tasks.length>4)&&(n=e[t].tasks.length+" задач"),1===e[t].tasks.length&&(n=e[t].tasks.length+" задача"),e[t].tasks.length>1&&e[t].tasks.length<5&&(n=e[t].tasks.length+" задачи"),n}function i(e,t){localStorage.setItem(e,t)}function d(){const e=document.querySelectorAll(".wrapper__block-form");document.querySelectorAll(".wrapper__block-footer-add-new-task-btn").forEach((t,n)=>t.addEventListener("click",()=>e[n].classList.remove("hide")))}function u(){o(),n(),d(),t(),r(),c(),a()}t(),a(),r(),c(),d()})()}]);